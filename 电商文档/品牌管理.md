# å“ç‰Œç®¡ç†

#### ğŸ’¨å“ç‰ŒæŸ¥è¯¢

 1. vueé¡¹ç›®

    - å®˜æ–¹åœ°å€:

      - è¡¨æ ¼:https://v15.vuetifyjs.com/zh-Hans/components/data-tables
      - è¾“å…¥æ¡†:https://v15.vuetifyjs.com/zh-Hans/components/snackbars
      - æŒ‰é’®:https://v15.vuetifyjs.com/zh-Hans/components/buttons

    - åœ¨ item åŒ…ä¸‹æ–°å»ºMrBrand.vue

      ```
      <template>
        <v-card>
          <v-card-title>
            <v-btn color="info" @click="addData()">æ–°å¢</v-btn>
      
            <div class="text-xs-center">
              <v-dialog v-model="dialog" width="500">
                <v-card>
                  <v-card-title class="headline grey lighten-2" primary-title>
                    å“ç‰Œ{{ isEdit?'ä¿®æ”¹':'æ–°å¢' }}
                  </v-card-title>
      
                  <mr-brand-form @closeDialog="closeDialog" :dialog="dialog" :isEdit="isEdit" :brandDetail="brandDetail" />
                </v-card>
              </v-dialog>
            </div>
      
            <!-- è°ƒæŒ‰é’®å’Œè¾“å…¥æ¡†ä¹‹é—´çš„é—´è· -->
            <v-spacer />
            <!--
                  append-icon : å›¾æ ‡
                  label : inputé»˜è®¤å€¼
              -->
            <v-text-field
              append-icon="search"
              label="å“ç‰Œåç§°"
              @keyup.enter="getTableData()"
              v-model="search"
            ></v-text-field>
          </v-card-title>
          <!-- è¡¨æ ¼ç»„ä»¶ -->
          <v-data-table
            :headers="headers"
            :items="desserts"
            :pagination.sync="pagination"
            :total-items="total"
            class="elevation-1"
          >
            <template slot="items" slot-scope="props">
              <td class="text-xs-center">{{ props.item.id }}</td>
              <td class="text-xs-center">{{ props.item.name }}</td>
              <td class="text-xs-center">
                <!-- src æ˜¯htmlæ ‡ç­¾çš„å±æ€§ :src="vueçš„å±æ€§" -->
                <img width="100" :src="props.item.image" />
              </td>
              <td class="text-xs-center">{{ props.item.letter }}</td>
              <td class="text-xs-center">
                <v-btn flat icon color="yellow" @click="editData(props.item)">
                  <v-icon>edit</v-icon>
                </v-btn>
                <v-btn flat icon color="green" @click="deleteDate(props.item.id)">
                  <v-icon>delete</v-icon>
                </v-btn>
              </td>
            </template>
          </v-data-table>
        </v-card>
      </template>
      <script>
      import MrBrandForm from "./MrBrandForm";
      export default {
        name: "MrBrand",
        components: {
          MrBrandForm,
        },
        data() {
          return {
            brandDetail:{},
            isEdit:false,
            pagination: {},
            dialog: false,
            total: 0,
            search: "",
            headers: [
              {
                text: "id",
                align: "center",
                value: "id",
              },
              {
                text: "å“ç‰Œåç§°",
                align: "center",
                value: "name",
              },
              {
                text: "å“ç‰Œlogo",
                align: "center",
                value: "image",
              },
              {
                text: "é¦–å­—æ¯",
                align: "center",
                value: "letter",
              },
              {
                text: "æ“ä½œ",
                align: "center",
                sortable: false,
                value: "id",
              },
            ],
            desserts: [],
          };
        },
        mounted() {
          this.getTableData();
        },
        methods: {
          closeDialog () {
            this.dialog = false;
            this.getTableData();
          },
          deleteDate(id){
              this.$message.confirm('æ­¤æ“ä½œå°†æ°¸ä¹…åˆ é™¤è¯¥å“ç‰Œ, æ˜¯å¦ç»§ç»­?').then(() =>{
                  this.$http.delete('/brand/delete?id=' +id).then((resp)=>{
      
                    if(resp.data.code != 200){
                      this.$message.error('åˆ é™¤å¤±è´¥');
                    }
                      this.$message.success('åˆ é™¤æˆåŠŸ');
                      this.getTableData();
      
                  }).catch((error)=>{
                    console.log(error);
                  })
      
              }).catch(() => {
                this.$message.info("åˆ é™¤å·²å–æ¶ˆï¼");
              })
          },
          addData () {
            //this.brandDetail = {};
            this.isEdit = false;
            this.dialog = true;
          },
          editData (obj) {
            this.brandDetail = obj;
            this.isEdit = true;
            this.dialog = true;
          },
          getTableData() {
            this.$http
              .get("/brand/list", {
                params: {
                  page: this.pagination.page,
                  rows: this.pagination.rowsPerPage,
                  sort: this.pagination.sortBy,
                  order: this.pagination.descending,
                  name: this.search,
                },
              })
              .then((resp) => {
                this.desserts = resp.data.data.list;
                this.total = resp.data.data.total;
              })
              .catch((error) => console.log(error));
          },
        },
        watch: {
          pagination() {
            this.getTableData();
          },
        },
      };
      </script>
      ```
      
- æ‰“å¼€ src / router / index.js æ–‡ä»¶
  
  - ä¿®æ”¹ç¬¬ 27 è¡Œ
    
    ```
         route("/item/brand",'/item/MrBrand',"MrBrand"),ho
    ```
    
2. åå°ä»£ç 
	
- ##### mingrui-shop-common-core
  
  - pom.xml
    
    ```java
        <!--å¸®åŠ©å¼€å‘äººå‘˜å¿«é€Ÿç”ŸæˆAPIæ–‡æ¡£-->
        <dependency>
             <groupId>io.springfox</groupId>
             <artifactId>springfox-swagger2</artifactId>
             <version>2.9.2</version>
        </dependency>
    ```
  
- com.baidu.shop.validate.group --> MingruiOperation.java
  
  ```
      public interface Search{}
  ```
  
- åœ¨baseåŒ…ä¸‹æ–°å»ºBaseDTO.java
  
  ```
      package com.baidu.shop.base;
      
      import io.swagger.annotations.ApiModel;
      import io.swagger.annotations.ApiModelProperty;
      import lombok.Data;
      
      @Data
      @ApiModel(value = "BaseDTOç”¨äºæ•°æ®ä¼ è¾“,å…¶ä»–dtoéœ€è¦ç»§æ‰¿æ­¤ç±»")
      public class BaseDTO {
      
          @ApiModelProperty(value = "å½“å‰é¡µ", example = "1")
          private Integer page;
      
          @ApiModelProperty(value = "æ¯é¡µæ˜¾ç¤ºå¤šå°‘æ¡",example = "5")
          private Integer rows;
      
          @ApiModelProperty(value = "æ’åºå­—æ®µ")
          private String sort;
      
          @ApiModelProperty(value = "æ˜¯å¦å‡åº")
          private String order;
      
          public String getOrderBy(){
              return sort + " " + (Boolean.valueOf(order) ? "desc" : "asc");
          }
      
      }
      
  ```
  
- ##### mingrui-shop-service-api

  - pom.xml

    ```
    <!--åˆ†é¡µå·¥å…·-->
    <dependency>
          <groupId>com.github.pagehelper</groupId>
          <artifactId>pagehelper-spring-boot-starter</artifactId>
          <version>1.2.10</version>
    </dependency>
    ```

- ##### mingrui-shop-service-api-xxx

  â€‹	åœ¨com.baidu.shopä¸‹æ–°å»ºdtoåŒ…

  - BrandDTO.java

    ```
    package com.baidu.shop.dto;
    
    import com.baidu.shop.base.BaseDTO;
    import com.baidu.shop.validate.group.MingruiOperation;
    import io.swagger.annotations.ApiModel;
    import io.swagger.annotations.ApiModelProperty;
    import lombok.Data;
    
    import javax.validation.constraints.NotEmpty;
    import javax.validation.constraints.NotNull;
    
    
    @Data
    @ApiModel(value = "å“ç‰ŒDTO")
    public class BrandDTO extends BaseDTO {
    
        @ApiModelProperty(value = "å“ç‰Œä¸»é”®", example = "1")
        @NotNull(message = "ä¸»é”®ä¸èƒ½ä¸ºç©º", groups = {MingruiOperation.Update.class})
        private Integer id;
    
        @ApiModelProperty(value = "å“ç‰Œåç§°")
        @NotEmpty(message = "åç‰Œåç§°ä¸èƒ½ä¸ºç©º", groups = {MingruiOperation.Add.class, 		  					MingruiOperation.Update.class})
        private String name;
    
        @ApiModelProperty(value = "å“ç‰Œå›¾ç‰‡")
        private String image;
    
        @ApiModelProperty(value = "å“ç‰Œé¦–å­—æ¯")
        private Character letter;
    
        @ApiModelProperty(value = "å“ç‰Œidé›†åˆ")
        private String categories;
    
    }
    
    ```

- ##### entityåŒ…ä¸‹æ–°å»ºBrandEntity

  - BrandEntity.java

    ```
    package com.baidu.shop.entity;
    
    import lombok.Data;
    
    import javax.persistence.GeneratedValue;
    import javax.persistence.GenerationType;
    import javax.persistence.Id;
    import javax.persistence.Table;
    import javax.validation.constraints.NotEmpty;
    
    @Data
    @Table(name = "tb_brand")
    public class BrandEntity {
    
    
        @Id
        private Integer id;
    
        private String name;
    
        private String image;
    
        private Character letter;
    
    }
    ```

- ##### serviceåŒ…ä¸‹æ–°å»ºBrandService

  - BrandService.java

    ```
    package com.baidu.shop.service;
    
    import com.alibaba.fastjson.JSONObject;
    import com.baidu.shop.base.Result;
    import com.baidu.shop.dto.BrandDTO;
    import com.baidu.shop.entity.BrandEntity;
    import com.baidu.shop.validate.group.MingruiOperation;
    import com.github.pagehelper.PageInfo;
    import io.swagger.annotations.Api;
    import io.swagger.annotations.ApiOperation;
    import org.springframework.validation.annotation.Validated;
    import org.springframework.web.bind.annotation.*;
    
    import java.util.List;
    
    
    @Api(tags = "å“ç‰Œæ¥å£")
    public interface BrandService {
    
        @GetMapping(value = "brand/list")
        @ApiOperation(value = "æŸ¥è¯¢å“ç‰Œä¿¡æ¯")
        Result<PageInfo<BrandEntity>> getBrandInfo(BrandDTO brandDTO);
    
    }
    ```

- ##### mingrui-shop-service-xxx

  â€‹	åœ¨mapperåŒ…ä¸‹æ–°å»ºBrandMapper

  - BrandMapper.java

    ```
    package com.baidu.shop.mapper;
    
    import com.baidu.shop.entity.BrandEntity;
    import org.apache.ibatis.annotations.Select;
    import tk.mybatis.mapper.common.Mapper;
    
    import java.util.List;
    
    public interface BrandMapper extends Mapper<BrandEntity> {
        @Select(value = "select * from tb_brand b where b.id in(select cb.brand_id from tb_category_brand 	  cb where cb.category_id=#{cid})")
        List<BrandEntity> getBrandInfoByCategoryId(Integer cid);
    }
    ```

    åœ¨implåŒ…ä¸‹æ–°å»ºBrandServiceImpl

  - BrandServiceImpl.java

    ```
    package com.baidu.shop.service.impl;
    
    import com.alibaba.fastjson.JSONObject;
    import com.baidu.shop.base.BaseApiService;
    import com.baidu.shop.base.Result;
    import com.baidu.shop.dto.BrandDTO;
    import com.baidu.shop.entity.BrandEntity;
    import com.baidu.shop.entity.CategoryBrandEntity;
    import com.baidu.shop.mapper.BrandMapper;
    import com.baidu.shop.mapper.CategoryBrandMapper;
    import com.baidu.shop.service.BrandService;
    import com.baidu.shop.utils.BaiduBeanUtil;
    import com.baidu.shop.utils.PinyinUtil;
    import com.github.pagehelper.PageHelper;
    import com.github.pagehelper.PageInfo;
    import org.springframework.beans.factory.annotation.Autowired;
    import org.springframework.transaction.annotation.Transactional;
    import org.springframework.util.StringUtils;
    import org.springframework.web.bind.annotation.RestController;
    import tk.mybatis.mapper.entity.Example;
    
    import java.util.ArrayList;
    import java.util.Arrays;
    import java.util.List;
    import java.util.stream.Collectors;
    
    @RestController
    public class BrandServiceImpl extends BaseApiService implements BrandService {
    
        @Autowired
        private BrandMapper brandMapper;
    
        public Result<PageInfo<BrandEntity>> getBrandInfo(BrandDTO brandDTO) {
    
            //åˆ†é¡µ
            PageHelper.startPage(brandDTO.getPage(),brandDTO.getRows());
            //æ’åº
            if(!StringUtils.isEmpty(brandDTO.getSort())) PageHelper.orderBy(brandDTO.getOrderBy());
            //æ¡ä»¶æŸ¥è¯¢
            BrandEntity brandEntity = BaiduBeanUtil.copyProperties(brandDTO, BrandEntity.class);
            Example example = new Example(BrandEntity.class);
            example.createCriteria().andLike("name","%" + brandEntity.getName() + "%");
            //æŸ¥è¯¢
            List<BrandEntity> brandEntities = brandMapper.selectByExample(example);
            PageInfo<BrandEntity> objectPageInfo = new PageInfo<>(brandEntities);
            
            return setResultSuccess(objectPageInfo);
        }
    }
    ```

#### ğŸ’¨å“ç‰ŒæŸ¥è¯¢

1. å‰å°vueé¡¹ç›®/ä»£ç 
   - å®˜æ–¹åœ°å€
     - æ¨¡æ€æ¡†åœ°å€:https://v15.vuetifyjs.com/zh-Hans/components/dialogs
     - formè¡¨å•åœ°å€:https://v15.vuetifyjs.com/zh-Hans/components/forms

------

- æ–°å»ºMrBrandForm.vue

  ```
  <template>
    <div>
      <v-card-text>
        <v-form v-model="valid" ref="form">
          <v-text-field
            v-model="brand.name"
            label="å“ç‰Œåç§°"
            :rules="nameRules"
            required
          ></v-text-field>
  
          <v-cascader
            url="/category/list"
            required
            v-model="brand.categories"
            multiple
            label="å•†å“åˆ†ç±»"
          />
  
          <v-layout row>
            <v-flex xs3>
              <span style="font-size: 16px; color: #444">å“ç‰ŒLOGOï¼š</span>
            </v-flex>
            <v-flex>
              <v-upload
                v-model="brand.image"
                url="/upload"
                :multiple="false"
                :pic-width="250"
                :pic-height="90"
              />
            </v-flex>
          </v-layout>
        </v-form>
      </v-card-text>
  
      <v-divider></v-divider>
  
      <v-card-actions>
        <v-spacer></v-spacer>
        <v-btn small @click="cancel()">å–æ¶ˆ</v-btn>
        <v-btn small color="primary" @click="submitForm()">ç¡®è®¤</v-btn>
      </v-card-actions>
    </div>
  </template>
  <script>
  export default {
    name: "MrBrandForm",
    props: {
      dialog: Boolean,
      brandDetail:Object,
      isEdit:Boolean
    },
    watch: {
      dialog(val) {
        if (val) {
          delete this.brand.id;
          this.$refs.form.reset();
        }
      },
      brandDetail (val) {
        //æ§åˆ¶æ˜¯æ–°å¢è¿˜æ˜¯ä¿®æ”¹å‘ç”Ÿçš„æ•°æ®å˜åŒ–
        if(this.isEdit){
          //å›æ˜¾æ•°æ®
          this.$http.get('/category/brand',{
            params:{
              brandId:val.id
            }
          }).then(resp => {
            let brand = val;
            brand.categories = resp.data.data;
            this.brand = brand;
          }).catch(error => console.log(error));
  
        }
      },
      
    },
    data() {
      //åœ¨jsä¸­ null == false , '' == false , undefined == false , 0 == false
      return {
        valid: true,
        nameRules: [
          (v) => !!v || "å“ç‰Œåç§°ä¸èƒ½ä¸ºç©º",
          (v) => (v && v.length <= 10) || "å“ç‰Œåç§°æœ€å¤š10ä¸ªé•¿åº¦",
        ],
        brand: {
          name: "",
          image:'',
          categories: [],
        },
      };
    },
    methods: {
      cancel() {
        this.$emit("closeDialog");
      },
      submitForm() {
        if (!this.$refs.form.validate()) {
          return;
        }
        let formData = this.brand;
        let categoryIdArr = this.brand.categories.map((category) => category.id);
        formData.categories = categoryIdArr.join();
  
        //$.ajax() å’Œ $.get() | $.post()æ–¹æ³•çš„åŒºåˆ«?
        this.$http({
          url:'/brand/save',
          method:this.isEdit ? 'put' : 'post',
          data:formData
        }).then((resp) => {
            if (resp.data.code != 200) {
              return;
            }
            //å…³é—­æ¨¡æ€æ¡†
            this.cancel();
            //åˆ·æ–°è¡¨å•
  
          })
          .catch((error) => console.log(error));
      },
    },
  };
  </script>
  ```

1. ##### Casecader.vueéœ€è¦ä¿®æ”¹113è¡Œ

   - MrBrand.vue

     ```
     <template>
       <v-card>
         <v-card-title>
           <v-btn color="info" @click="addData()">æ–°å¢</v-btn>
     
           <div class="text-xs-center">
             <v-dialog v-model="dialog" width="500">
               <v-card>
                 <v-card-title class="headline grey lighten-2" primary-title>
                   å“ç‰Œ{{ isEdit?'ä¿®æ”¹':'æ–°å¢' }}
                 </v-card-title>
     
                 <mr-brand-form @closeDialog="closeDialog" :dialog="dialog" :isEdit="isEdit" :brandDetail="brandDetail" />
               </v-card>
             </v-dialog>
           </div>
     
           <!-- è°ƒæŒ‰é’®å’Œè¾“å…¥æ¡†ä¹‹é—´çš„é—´è· -->
           <v-spacer />
     
           <!--
                 append-icon : å›¾æ ‡
                 label : inputé»˜è®¤å€¼
             -->
           <v-text-field
             append-icon="search"
             label="å“ç‰Œåç§°"
             @keyup.enter="getTableData()"
             v-model="search"
           ></v-text-field>
         </v-card-title>
         <!-- è¡¨æ ¼ç»„ä»¶ -->
         <v-data-table
           :headers="headers"
           :items="desserts"
           :pagination.sync="pagination"
           :total-items="total"
           class="elevation-1"
         >
           <template slot="items" slot-scope="props">
             <td class="text-xs-center">{{ props.item.id }}</td>
             <td class="text-xs-center">{{ props.item.name }}</td>
             <td class="text-xs-center">
               <!-- src æ˜¯htmlæ ‡ç­¾çš„å±æ€§ :src="vueçš„å±æ€§" -->
               <img width="100" :src="props.item.image" />
             </td>
             <td class="text-xs-center">{{ props.item.letter }}</td>
             <td class="text-xs-center">
               <v-btn flat icon color="yellow" @click="editData(props.item)">
                 <v-icon>edit</v-icon>
               </v-btn>
               <v-btn flat icon color="green" @click="deleteDate(props.item.id)">
                 <v-icon>delete</v-icon>
               </v-btn>
             </td>
           </template>
         </v-data-table>
       </v-card>
     </template>
     <script>
     import MrBrandForm from "./MrBrandForm";
     export default {
       name: "MrBrand",
       components: {
         MrBrandForm,
       },
       data() {
         return {
           brandDetail:{},
           isEdit:false,
           pagination: {},
           dialog: false,
           total: 0,
           search: "",
           headers: [
             {
               text: "id",
               align: "center",
               value: "id",
             },
             {
               text: "å“ç‰Œåç§°",
               align: "center",
               value: "name",
             },
             {
               text: "å“ç‰Œlogo",
               align: "center",
               value: "image",
             },
             {
               text: "é¦–å­—æ¯",
               align: "center",
               value: "letter",
             },
             {
               text: "æ“ä½œ",
               align: "center",
               sortable: false,
               value: "id",
             },
           ],
           desserts: [],
         };
       },
       mounted() {
         this.getTableData();
       },
       methods: {
         closeDialog () {
           this.dialog = false;
           this.getTableData();
         },
         deleteDate(id){
             this.$message.confirm('æ­¤æ“ä½œå°†æ°¸ä¹…åˆ é™¤è¯¥å“ç‰Œ, æ˜¯å¦ç»§ç»­?').then(() =>{
                 this.$http.delete('/brand/delete?id=' +id).then((resp)=>{
     
                   if(resp.data.code != 200){
                     this.$message.error('åˆ é™¤å¤±è´¥');
                   }
                     this.$message.success('åˆ é™¤æˆåŠŸ');
                     this.getTableData();
     
                 }).catch((error)=>{
                   console.log(error);
                 })
     
             }).catch(() => {
               this.$message.info("åˆ é™¤å·²å–æ¶ˆï¼");
             })
         },
         addData () {
           //this.brandDetail = {};
           this.isEdit = false;
           this.dialog = true;
         },
         editData (obj) {
           this.brandDetail = obj;
           this.isEdit = true;
           this.dialog = true;
         },
         getTableData() {
           this.$http
             .get("/brand/list", {
               params: {
                 page: this.pagination.page,
                 rows: this.pagination.rowsPerPage,
                 sort: this.pagination.sortBy,
                 order: this.pagination.descending,
                 name: this.search,
               },
             })
             .then((resp) => {
               this.desserts = resp.data.data.list;
               this.total = resp.data.data.total;
             })
             .catch((error) => console.log(error));
         },
       },
       watch: {
         pagination() {
           this.getTableData();
         },
       },
     };
     </script>
     ```

2. åå°ä»£ç 

- ##### mingrui-shop-common-core

  â€‹	åœ¨utilsåŒ…ä¸‹æ–°å»ºBaiduBeanUtil

  - BaiduBeanUtil.java

    ```
    package com.baidu.shop.utils;
    
    import com.sun.org.apache.bcel.internal.generic.RETURN;
    import org.springframework.beans.BeanUtils;
    
    public class BaiduBeanUtil<T> {
    
        public static <T> T copyProperties(Object source,Class<T> clazz){
            try {
                T t = clazz.newInstance();//åˆ›å»ºå½“å‰ç±»å‹çš„å®ä¾‹
                BeanUtils.copyProperties(source,t);
                return t;
            } catch (InstantiationException e) {
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                e.printStackTrace();
            }
            return null;
        }
    
    }
    ```

- ##### mingrui-shop-service-api-xxx

  - BrandDTO.java

    ```
    @ApiModelProperty(value = "å“ç‰Œidé›†åˆ")
    @NotEmpty(message = "å“ç‰Œåˆ†ç±»ä¿¡æ¯ä¸èƒ½ä¸ºç©º",groups = {MingruiOperation.Add.class})
    private String categories;
    ```

- ##### entityåŒ…ä¸‹æ–°å»ºCategoryBrandEntity

  - CategoryBrandEntity.java

    ```
    package com.baidu.shop.entity;
    
    import lombok.Data;
    import javax.persistence.Table;
    
    @Table(name = "tb_category_brand")
    @Data
    public class CategoryBrandEntity {
    
        private Integer categoryId;
    
        private Integer brandId;
    
    }
    ```

  - BrandService.java æ–°å¢ä»£ç 

    ```
    @PostMapping(value = "brand/save")
    @ApiOperation(value = "æ–°å¢å“ç‰Œ")
    Result<JSONObject> postBrandInfo(@Validated({MingruiOperation.Add.class}) 										 @RequestBody BrandDTO brandDTO);
    ```

- ##### mingrui-shop-service-xxx

  â€‹	åœ¨mapperåŒ…ä¸‹æ–°å»ºCategoryBrandMapper

  - CategoryBrandMapper.java

    ```
    package com.baidu.shop.mapper;
    
    import com.baidu.shop.entity.CategoryBrandEntity;
    import tk.mybatis.mapper.common.Mapper;
    import tk.mybatis.mapper.common.special.InsertListMapper;
    
    
    public interface CategoryBrandMapper extends InsertListMapper<CategoryBrandEntity>,Mapper<CategoryBrandEntity>{
    }
    ```

  - BrandServiceImpl.java

    ```
    @Override
    @Transactional
    public Result<JSONObject> postBrandInfo(BrandDTO brandDTO) {
            //è·å–æ–°å¢çš„æ•°æ®
            BrandEntity brandEntity = BaiduBeanUtil.copyProperties(brandDTO, BrandEntity.class);
            //æˆªå–åç§°çš„é¦–å­—æ¯
            brandEntity.setLetter(PinyinUtil.getUpperCase(String.valueOf(brandEntity.getName().toCharArray()[0]), false).toCharArray()[0]);
            brandMapper.insertSelective(brandEntity);
            String categories = brandDTO.getCategories();//å¾—åˆ°åˆ†ç±»é›†åˆå­—ç¬¦ä¸²
            if(StringUtils.isEmpty(brandDTO.getCategories())) {//æ•°æ®ä¸ä¸ºç©º
                return this.setResultError("");
            }
            List<CategoryBrandEntity> categoryBrandEntities = new ArrayList<>();//å®šä¹‰listé›†åˆ
            if(categories.contains(",")){//å¤šä¸ªåˆ†ç±» --> æ‰¹é‡æ–°å¢
                String[] categoryArr = categories.split(",");//æ ¹æ®é€—å·åˆ†å‰²
                for (String s : categoryArr) {//éå†
                    CategoryBrandEntity categoryBrandEntity = new CategoryBrandEntity();//å®ä½“ç±»
                    categoryBrandEntity.setBrandId(brandEntity.getId());//è·å¾—å“ç‰Œid
                    categoryBrandEntity.setCategoryId(Integer.valueOf(s));//è·å¾—åˆ†ç±»çš„æ•°ç»„
                    categoryBrandEntities.add(categoryBrandEntity);//å®ä½“ç±»ç»™é›†åˆèµ‹å€¼
                }
                categoryBrandMapper.insertList(categoryBrandEntities);
            }else{//æ™®é€šå•ä¸ªæ–°å¢
                CategoryBrandEntity categoryBrandEntity = new CategoryBrandEntity();
                categoryBrandEntity.setBrandId(brandEntity.getId());
                categoryBrandEntity.setCategoryId(Integer.valueOf(categories));
                categoryBrandMapper.insertSelective(categoryBrandEntity);
            }
            return this.setResultSuccess();
    }
    ```

    



